const defaultValues={CODE128:"Example1234",CODE128A:"EXAMPLE1234",CODE128B:"Example 1234",CODE128C:"12345678",EAN13:"1234567890128",EAN8:"96385074",EAN5:"54495",EAN2:"53",UPC:"123456789999",CODE39:"CODE39 Barcode",ITF14:"12345678901231",ITF:"123456",MSI:"1234",MSI10:"1234",MSI11:"1234",MSI1010:"1234",MSI1110:"1234",pharmacode:"1234"},checkboxControls=document.querySelectorAll('[type="checkbox"]'),radioControls=document.querySelectorAll('[type="radio"]'),rangeControls=document.querySelectorAll('[type="range"]'),colorContorls=document.querySelectorAll('[type="color"]'),barcode=document.getElementById("barcode"),invalid=document.getElementById("invalid"),barcodeType=document.getElementById("barcodeType"),lastChar=document.getElementById("lastChar"),userInput=document.getElementById("userInput"),fontFamily=document.getElementById("fontFamily");document.addEventListener("DOMContentLoaded",()=>{for(let e of checkboxControls)e.oninput=newBarcode;for(let e of radioControls)e.oninput=newBarcode;for(let e of rangeControls)e.oninput=newBarcode;for(let e of colorContorls)e.oninput=newBarcode;barcodeType.onchange=(()=>{userInput.value=defaultValues[barcodeType.value],"CODE128"===barcodeType.value||"CODE128A"===barcodeType.value||"CODE128B"===barcodeType.value||"CODE128C"===barcodeType.value?document.getElementById("ean128Ui").classList.remove("d-none"):document.getElementById("ean128Ui").classList.add("d-none"),"EAN13"===barcodeType.value||"EAN8"===barcodeType.value||"UPC"===barcodeType.value?document.getElementById("flatUi").classList.remove("d-none"):document.getElementById("flatUi").classList.add("d-none"),"EAN13"===barcodeType.value?document.getElementById("lastCharUi").classList.remove("d-none"):document.getElementById("lastCharUi").classList.add("d-none"),"CODE39"===barcodeType.value?document.getElementById("mod43Ui").classList.remove("d-none"):document.getElementById("mod43Ui").classList.add("d-none"),newBarcode()}),lastChar.oninput=newBarcode,userInput.oninput=newBarcode,fontFamily.onchange=(()=>{fontFamily.style.fontFamily=fontFamily.value,newBarcode()}),newBarcode()});const getFontOptions=()=>{const e=document.querySelectorAll('input[name="fontOption"]:checked');let t="";for(let n of e)t+=n.value+" ";return t},hexToRgb=(e,t)=>{let n=parseInt(e.slice(1,3),16),o=parseInt(e.slice(3,5),16),d=parseInt(e.slice(5,7),16);return 0<=t&&t<=1?`rgba(${n}, ${o}, ${d}, ${t})`:`rgb(${n}, ${o}, ${d})`},newBarcode=()=>{JsBarcode("#barcode",userInput.value,{format:barcodeType.value,ean128:document.getElementById("ean128").checked,flat:document.getElementById("flat").checked,lastChar:document.getElementById("lastCharEnable").checked?document.getElementById("lastChar").value:"",mod43:document.getElementById("mod43").checked,width:document.getElementById("barWidth").value,height:parseInt(document.getElementById("barHeight").value),margin:parseInt(document.getElementById("margin").value),lineColor:hexToRgb(document.getElementById("foregroundColor").value,document.getElementById("foregroundAlpha").value/100),background:hexToRgb(document.getElementById("backgroundColor").value,document.getElementById("backgroundAlpha").value/100),displayValue:document.getElementById("showText").checked,textAlign:document.querySelector('input[name="textAlign"]:checked').value,textPosition:document.querySelector('input[name="textPosition"]:checked').value,textMargin:parseInt(document.getElementById("textMargin").value),font:fontFamily.value,fontSize:parseInt(document.getElementById("fontSize").value),fontOptions:getFontOptions(),valid:e=>{e?(barcode.classList.remove("d-none"),invalid.classList.add("d-none")):(barcode.classList.add("d-none"),invalid.classList.remove("d-none"))}}),document.getElementById("barWidthValue").innerText=document.getElementById("barWidth").value,document.getElementById("barHeightValue").innerText=document.getElementById("barHeight").value,document.getElementById("marginValue").innerText=document.getElementById("margin").value,document.getElementById("foregroundAlphaValue").innerText=document.getElementById("foregroundAlpha").value+"%",document.getElementById("backgroundAlphaValue").innerText=document.getElementById("backgroundAlpha").value+"%",document.getElementById("textMarginValue").innerText=document.getElementById("textMargin").value,document.getElementById("fontSizeValue").innerText=document.getElementById("fontSize").value};document.getElementById("download").onclick=(()=>{const e=document.createElement("a");e.download="barcode.png",e.href=barcode.toDataURL(),e.click()});